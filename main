import java.io.IOException;
import java.util.Timer;
import java.util.TimerTask;

import org.firmata4j.firmata.FirmataDevice;
import org.firmata4j.IODevice;
import org.firmata4j.Pin;
import org.firmata4j.ssd1306.SSD1306;
import org.firmata4j.I2CDevice;

public class Minorproject {

    static final byte I2C0 = 0x3c;

    public static void main(String[] args) throws InterruptedException, IOException {
        final String myPortConnection = "COM3";
        int D6 = 6;
        int A0 = 15;
        int D2 = 2;
        IODevice uno = new FirmataDevice(myPortConnection);
        uno.start();
        System.out.println("My personal board has started to run...");
        uno.ensureInitializationIsDone();
        Pin StoppageButton = uno.getPin(D6);
        StoppageButton.setMode(Pin.Mode.INPUT);
        Pin moistureSensor = uno.getPin(A0);
        Pin blackPump = uno.getPin(D2);
        blackPump.setMode(Pin.Mode.OUTPUT);

        I2CDevice i2cObject = uno.getI2CDevice(I2C0);
        SSD1306 oledDisplay = new SSD1306(i2cObject, SSD1306.Size.SSD1306_128_64);
        oledDisplay.init();


        Timer timer = new Timer();
        moistureTask task = new moistureTask(moistureSensor, blackPump, oledDisplay,StoppageButton,timer);

        timer.schedule(task, 0, 1000);

    }
}
